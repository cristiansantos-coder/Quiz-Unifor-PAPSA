<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz UNIFOR</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; }
    .container { width: 100%; max-width: 800px; background: white; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.3); overflow: hidden; }
    .header { background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%); color: white; padding: 25px; text-align: center; }
    .header h1 { font-size: 2.2rem; margin-bottom: 10px; }
    .content { padding: 30px; }
    .screen { display: none; }
    .screen.active { display: block; }
    .welcome-screen { text-align: center; }
    .welcome-screen h2 { color: #0c2461; margin-bottom: 20px; }
    .info-box { background: #f8f9fa; border-left: 5px solid #0c2461; padding: 20px; margin: 20px 0; border-radius: 10px; }
    .info-box h3 { color: #0c2461; margin-bottom: 10px; }
    .form-group { margin-bottom: 20px; text-align: left; }
    .form-row { display: flex; gap: 15px; margin-bottom: 15px; }
    @media (max-width: 768px) { .form-row { flex-direction: column; } }
    .form-group label { display: block; margin-bottom: 8px; color: #0c2461; font-weight: 600; }
    .form-control { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; }
    .btn { background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%); color: white; border: none; padding: 15px 30px; font-size: 1.1rem; border-radius: 50px; cursor: pointer; transition: all 0.3s; font-weight: 600; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(12,36,97,0.3); }
    .btn-success { background: linear-gradient(135deg, #28a745 0%, #218838 100%); }
    .question-header { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
    .question-number { background: #0c2461; color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
    .question-text { font-size: 1.2rem; margin-bottom: 20px; }
    .options-container { display: grid; gap: 10px; margin-bottom: 20px; }
    .option { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; cursor: pointer; display: flex; align-items: center; gap: 10px; }
    .option:hover { background: #e9ecef; }
    .option.selected { background: #d4edda; border-color: #c3e6cb; }
    .option-letter { background: #0c2461; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
    .player-info-display { background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 20px; text-align: center; }
    .result-screen { text-align: center; }
    .score-display { font-size: 3rem; font-weight: bold; color: #0c2461; margin: 20px 0; }
    .prize-message { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #333; padding: 20px; border-radius: 10px; margin: 20px 0; }
    .no-prize-message { background: #f8f9fa; color: #666; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px dashed #dee2e6; }
    .controls { display: flex; justify-content: center; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
    .footer { text-align: center; margin-top: 30px; padding: 20px; background: #f8f9fa; border-top: 2px solid #e9ecef; color: #666; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>QUIZ UNIFOR</h1>
      <p>Teste seus conhecimentos sobre a universidade</p>
    </div>
    
    <div class="content">
      <!-- Tela de Boas-Vindas -->
      <div id="welcomeScreen" class="screen active">
        <div class="welcome-screen">
          <h2>Bem-vindo ao Quiz UNIFOR!</h2>
          
          <div class="info-box">
            <h3>üìö Como funciona:</h3>
            <p>‚Ä¢ 5 quest√µes aleat√≥rias</p>
            <p>‚Ä¢ Brinde para quem acertar todas</p>
            <p>‚Ä¢ Resultados salvos automaticamente</p>
          </div>
          
          <div class="form-group">
            <div class="form-row">
              <div style="flex: 1;">
                <label for="playerName">Nome Completo:</label>
                <input type="text" id="playerName" class="form-control" placeholder="Seu nome" required>
              </div>
              <div style="flex: 1;">
                <label for="playerMatricula">Matr√≠cula:</label>
                <input type="text" id="playerMatricula" class="form-control" placeholder="Sua matr√≠cula" required>
              </div>
            </div>
          </div>
          
          <button id="startQuiz" class="btn btn-success">üöÄ Iniciar Quiz</button>
        </div>
      </div>
      
      <!-- Tela da Quest√£o -->
      <div id="questionScreen" class="screen">
        <div class="player-info-display">
          <p><strong>Participante:</strong> <span id="displayPlayerName">-</span></p>
          <p><strong>Matr√≠cula:</strong> <span id="displayPlayerMatricula">-</span></p>
          <p><strong>Progresso:</strong> <span id="displayProgress">1/5</span></p>
        </div>
        
        <div class="question-header">
          <div class="question-number" id="currentQuestion">1</div>
          <div style="background: #4CAF50; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem;">Quest√£o</div>
        </div>
        
        <div class="question-text" id="questionText">Carregando...</div>
        
        <div class="options-container" id="optionsContainer"></div>
        
        <div id="feedback" style="display: none; padding: 15px; border-radius: 8px; margin: 15px 0;"></div>
        
        <div class="controls">
          <button id="nextQuestion" class="btn" style="display: none;">‚è≠Ô∏è Pr√≥xima</button>
          <button id="submitAnswer" class="btn btn-success">‚úÖ Confirmar</button>
        </div>
      </div>
      
      <!-- Tela de Resultados -->
      <div id="resultScreen" class="screen">
        <div class="result-screen">
          <div class="player-info-display">
            <h3>Resultado Final</h3>
            <p><strong>Nome:</strong> <span id="resultPlayerName">-</span></p>
            <p><strong>Matr√≠cula:</strong> <span id="resultPlayerMatricula">-</span></p>
            <p><strong>Pontua√ß√£o:</strong> <span id="resultScore">-</span></p>
            <p><strong>Brinde:</strong> <span id="resultBrinde">-</span></p>
          </div>
          
          <div style="font-size: 4rem; margin: 20px 0;" id="resultIcon">üéØ</div>
          <h2 id="resultTitle">Quiz Conclu√≠do!</h2>
          
          <div class="score-display" id="scoreDisplay">0/5</div>
          
          <div id="prizeMessage" class="prize-message" style="display: none;">
            <h3>üéÅ PARAB√âNS! VOC√ä GANHOU BRINDE!</h3>
            <p>Acertou todas as quest√µes! Procure um organizador.</p>
          </div>
          
          <div id="noPrizeMessage" class="no-prize-message" style="display: none;">
            <h3>Quase l√°!</h3>
            <p>Voc√™ acertou <span id="scoreText">0</span> de 5 quest√µes.</p>
            <p>Tente novamente para ganhar o brinde!</p>
          </div>
          
          <div class="controls">
            <button id="restartQuiz" class="btn btn-success">üîÑ Jogar Novamente</button>
            <button id="newPlayer" class="btn">üë§ Novo Jogador</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
      <p>Universidade de Fortaleza | Quiz PAPSA</p>
    </div>
  </div>

  <script>
    // CONFIGURA√á√ÉO DA API
    const GOOGLE_SHEETS_API = "https://script.google.com/macros/s/AKfycbwRhk4qoH56xR80PcLKDPy1dQSB4eUyiEp_ItSy5xHD2N7g8eRRvzETPcmLo0tIt0TxiQ/exec";
    
    // Quest√µes do Quiz
    const questions = [
      { question: "Onde o aluno acessa informa√ß√µes sobre disciplinas e notas?", options: ["Redes sociais", "Sistema acad√™mico", "Biblioteca", "Coordena√ß√£o"], correct: 1 },
      { question: "O aluno pode solicitar documentos acad√™micos de forma digital?", options: ["Sim", "N√£o"], correct: 0 },
      { question: "A biblioteca da UNIFOR oferece recursos:", options: ["Apenas f√≠sicos", "Apenas digitais", "F√≠sicos e digitais", "Apenas para professores"], correct: 2 },
      { question: "A UNIFOR oferece atendimento acad√™mico por canais digitais?", options: ["Sim", "N√£o"], correct: 0 },
      { question: "Os alunos podem participar de projetos acad√™micos?", options: ["Sim", "N√£o"], correct: 0 },
      { question: "As cl√≠nicas-escola da UNIFOR s√£o utilizadas para:", options: ["Apenas pesquisa", "Pr√°tica supervisionada", "Atendimento administrativo", "Eventos"], correct: 1 },
      { question: "O Hospital da UNIFOR est√° ligado a cursos da √°rea:", options: ["Humanas", "Sa√∫de", "Comunica√ß√£o", "Exatas"], correct: 1 },
      { question: "A UNIFOR possui espa√ßos de conviv√™ncia para os alunos?", options: ["Sim", "N√£o"], correct: 0 },
      { question: "A universidade oferece atividades esportivas?", options: ["Sim", "N√£o"], correct: 0 },
      { question: "Onde o aluno consulta notas e frequ√™ncia?", options: ["Biblioteca", "Portal do Aluno", "Secretaria", "Aplicativo banc√°rio"], correct: 1 }
    ];

    // Vari√°veis do jogo
    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let playerName = "";
    let playerMatricula = "";
    let selectedOption = null;

    // Elementos DOM
    const elements = {
      welcomeScreen: document.getElementById('welcomeScreen'),
      questionScreen: document.getElementById('questionScreen'),
      resultScreen: document.getElementById('resultScreen'),
      playerNameInput: document.getElementById('playerName'),
      playerMatriculaInput: document.getElementById('playerMatricula'),
      startQuizBtn: document.getElementById('startQuiz'),
      displayPlayerName: document.getElementById('displayPlayerName'),
      displayPlayerMatricula: document.getElementById('displayPlayerMatricula'),
      displayProgress: document.getElementById('displayProgress'),
      currentQuestion: document.getElementById('currentQuestion'),
      questionText: document.getElementById('questionText'),
      optionsContainer: document.getElementById('optionsContainer'),
      feedback: document.getElementById('feedback'),
      submitAnswerBtn: document.getElementById('submitAnswer'),
      nextQuestionBtn: document.getElementById('nextQuestion'),
      resultPlayerName: document.getElementById('resultPlayerName'),
      resultPlayerMatricula: document.getElementById('resultPlayerMatricula'),
      resultScore: document.getElementById('resultScore'),
      resultBrinde: document.getElementById('resultBrinde'),
      resultIcon: document.getElementById('resultIcon'),
      resultTitle: document.getElementById('resultTitle'),
      scoreDisplay: document.getElementById('scoreDisplay'),
      prizeMessage: document.getElementById('prizeMessage'),
      noPrizeMessage: document.getElementById('noPrizeMessage'),
      scoreText: document.getElementById('scoreText'),
      restartQuizBtn: document.getElementById('restartQuiz'),
      newPlayerBtn: document.getElementById('newPlayer')
    };

    // Iniciar quiz
    function initQuiz() {
      playerName = elements.playerNameInput.value.trim();
      playerMatricula = elements.playerMatriculaInput.value.trim();
      
      if (!playerName || !playerMatricula) {
        alert('Preencha nome e matr√≠cula!');
        return;
      }
      
      // Seleciona 5 quest√µes aleat√≥rias
      currentQuestions = [...questions].sort(() => Math.random() - 0.5).slice(0, 5);
      currentQuestionIndex = 0;
      score = 0;
      selectedOption = null;

      elements.displayPlayerName.textContent = playerName;
      elements.displayPlayerMatricula.textContent = playerMatricula;

      showQuestionScreen();
      loadQuestion();
    }

    function showQuestionScreen() {
      elements.welcomeScreen.classList.remove('active');
      elements.resultScreen.classList.remove('active');
      elements.questionScreen.classList.add('active');
    }

    function loadQuestion() {
      const question = currentQuestions[currentQuestionIndex];
      
      elements.questionText.textContent = question.question;
      elements.currentQuestion.textContent = currentQuestionIndex + 1;
      elements.displayProgress.textContent = `${currentQuestionIndex + 1}/5`;
      
      elements.optionsContainer.innerHTML = '';
      selectedOption = null;
      elements.feedback.style.display = 'none';
      elements.nextQuestionBtn.style.display = 'none';
      elements.submitAnswerBtn.style.display = 'block';

      question.options.forEach((option, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option';
        optionDiv.innerHTML = `
          <div class="option-letter">${String.fromCharCode(65 + index)}</div>
          <div>${option}</div>
        `;
        
        optionDiv.addEventListener('click', () => {
          document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
          optionDiv.classList.add('selected');
          selectedOption = index;
        });
        
        elements.optionsContainer.appendChild(optionDiv);
      });
    }

    function submitAnswer() {
      if (selectedOption === null) {
        alert('Selecione uma op√ß√£o!');
        return;
      }

      const question = currentQuestions[currentQuestionIndex];
      const isCorrect = selectedOption === question.correct;
      
      if (isCorrect) {
        score++;
        elements.feedback.innerHTML = '<h3>‚úÖ Correto!</h3><p>Parab√©ns!</p>';
        elements.feedback.style.backgroundColor = '#d4edda';
        elements.feedback.style.color = '#155724';
        elements.feedback.style.border = '2px solid #c3e6cb';
      } else {
        elements.feedback.innerHTML = `<h3>‚ùå Incorreto</h3><p>Resposta correta: <strong>${question.options[question.correct]}</strong></p>`;
        elements.feedback.style.backgroundColor = '#f8d7da';
        elements.feedback.style.color = '#721c24';
        elements.feedback.style.border = '2px solid #f5c6cb';
      }
      
      elements.feedback.style.display = 'block';
      elements.submitAnswerBtn.style.display = 'none';
      elements.nextQuestionBtn.style.display = 'block';
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < currentQuestions.length) {
        loadQuestion();
      } else {
        showResultScreen();
      }
    }

    // Fun√ß√£o SIMPLES para salvar na planilha
    async function saveToGoogleSheets(data) {
      try {
        console.log('Enviando para planilha:', data);
        
        const response = await fetch(GOOGLE_SHEETS_API, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        const result = await response.json();
        console.log('Resposta:', result);
        return result.success === true;
      } catch (error) {
        console.error('Erro:', error);
        return false;
      }
    }

    function showResultScreen() {
      elements.questionScreen.classList.remove('active');
      elements.resultScreen.classList.add('active');
      
      const totalQuestions = currentQuestions.length;
      const ganhouBrinde = score === totalQuestions;
      
      // Atualiza a tela
      elements.resultPlayerName.textContent = playerName;
      elements.resultPlayerMatricula.textContent = playerMatricula;
      elements.resultScore.textContent = `${score}/${totalQuestions}`;
      elements.resultBrinde.textContent = ganhouBrinde ? "SIM üéÅ" : "N√ÉO";
      elements.scoreDisplay.textContent = `${score}/${totalQuestions}`;
      elements.scoreText.textContent = score;
      
      if (ganhouBrinde) {
        elements.resultIcon.textContent = "üèÜ";
        elements.resultTitle.textContent = "PERFEITO! GANHOU BRINDE!";
        elements.prizeMessage.style.display = 'block';
        elements.noPrizeMessage.style.display = 'none';
      } else {
        elements.resultIcon.textContent = score >= 4 ? "‚ú®" : score >= 3 ? "üëç" : "üìö";
        elements.resultTitle.textContent = score >= 4 ? "√ìtimo!" : score >= 3 ? "Bom!" : "Continue estudando!";
        elements.prizeMessage.style.display = 'none';
        elements.noPrizeMessage.style.display = 'block';
      }
      
      // Salva APENAS OS 4 CAMPOS na planilha
      const dataToSave = {
        nome: playerName,
        matricula: playerMatricula,
        pontuacao: score,
        ganhouBrinde: ganhouBrinde
      };
      
      // Salva silenciosamente
      saveToGoogleSheets(dataToSave).then(success => {
        console.log(success ? '‚úÖ Dados salvos' : '‚ö†Ô∏è Falha ao salvar');
      });
    }

    function restartQuiz() {
      currentQuestions = [...questions].sort(() => Math.random() - 0.5).slice(0, 5);
      currentQuestionIndex = 0;
      score = 0;
      selectedOption = null;
      showQuestionScreen();
      loadQuestion();
    }

    function newPlayer() {
      elements.playerNameInput.value = '';
      elements.playerMatriculaInput.value = '';
      elements.welcomeScreen.classList.add('active');
      elements.resultScreen.classList.remove('active');
    }

    // Event Listeners
    elements.startQuizBtn.addEventListener('click', initQuiz);
    elements.submitAnswerBtn.addEventListener('click', submitAnswer);
    elements.nextQuestionBtn.addEventListener('click', nextQuestion);
    elements.restartQuizBtn.addEventListener('click', restartQuiz);
    elements.newPlayerBtn.addEventListener('click', newPlayer);

    // Enter para iniciar
    elements.playerNameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') elements.playerMatriculaInput.focus();
    });
    elements.playerMatriculaInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') initQuiz();
    });

    // Testar API ao carregar
    window.addEventListener('load', () => {
      console.log('Quiz UNIFOR carregado');
      fetch(GOOGLE_SHEETS_API)
        .then(r => r.json())
        .then(data => console.log('API:', data))
        .catch(e => console.warn('API offline, mas quiz funciona'));
    });
  </script>
</body>
</html>
